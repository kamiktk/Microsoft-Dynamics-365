(function(n,t,i){function f(){function o(){var n=this;n.columnOrder=[];n.changeSort=function(t,i,u,f,e,o){var h,s;if(o&&!o.shiftKey)for(n.columnOrder=[],h=r.columns.columns(),s=0;s<h.length;s++)h[s].columnName!=t&&(h[s].sortOnColumn(!1),h[s].sortOrder(""));for(u(!0),i==""?f()==""||f()=="descending"?f("ascending"):f()=="ascending"&&f("descending"):f(i),s=0;s<n.columnOrder.length;s++)if(n.columnOrder[s].columnName==t){n.columnOrder[s].sortOrder=f();o&&n.onSort();return}n.columnOrder.push({columnName:t,sortOrder:f()});o&&n.onSort();return};n.addSort=function(t,u){for(var e=r.columns.columns(),f=0;f<e.length;f++)e[f].columnName==t&&n.changeSort(t,u,e[f].sortOnColumn,e[f].sortOrder,i,i)};n.setSort=function(t){var f,u;if(t.length!=i){for(f=r.columns.columns(),u=0;u<f.length;u++)f[u].sortOnColumn(!1),f[u].sortOrder("");for(u=0;u<t.length;u++)n.addSort(t[u].columnName,t[u].sortOrder)}};n.jumpBarSort=t.observable("All");n.jumpBarOptions=["All","#","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];n.sort=i;n.onSort=function(){var t=n.sort;typeof t=="function"&&(r.isJumpBarVisible?t(n.columnOrder,n.jumpBarSort()):t(n.columnOrder))};n.filter=i;n.onJumpBarSort=function(t){n.jumpBarSort(t);var i=n.filter;typeof i=="function"&&i(n.columnOrder,n.jumpBarSort())}}function u(n){for(var i=r.rows.rows(),t=0;t<i.length;t++)if(i[t]==n)return t;return-1}function s(n){return r.bindingElement.find(".po-crm-List-Data").find("tr:eq("+n+")")}function f(n,t){return t=t*2,r.selectColumnVisible&&t++,r.attachmentColumnVisible&&t++,r.bindingElement.find(".po-crm-List-Data").find("tr:eq("+n+")").find("td:eq("+t+")")}var r=this;r.isJumpBarVisible=!1;r.columns=new l;r.rows=new a;r.paging=new e;r.sorting=new o;r.rowIconsVisible=!1;r.attachmentColumnVisible=!1;r.selectColumnVisible=!0;r.currencySymbol="$";r.allowSorting=t.observable(!0);r.showLoader=t.observable(!1);r.loadingMessage=t.observable("");r.showMessage=t.observable(!1);r.message=t.observable("");r.numRecords=t.computed(function(){return r.rows.rows().length});r.bindingElement=i;r.setFocus=function(n){n?r.bindingElement.focus():r.bindingElement.blur()};n(document).click(function(){return r.bindingElement.blur(),!0});r.refreshEnabled=!0;r.refresh=i;r.onRefresh=function(){var n=r.refresh;typeof n=="function"&&n()};r.dblClickRow=i;r.onDblClickRow=function(n){var t=r.dblClickRow;typeof t=="function"&&t(n)};r.drillInto=i;r.onDrillInto=function(n,t){var i=r.drillInto;typeof i=="function"&&i(n,r.columns.columns()[t].columnName)};r.editing=t.observable(!1);r.currentEdit=t.observable(null);r.allowEditing=!0;r.onEdit=function(t,i,u,f){var e,o,s,h;if(r.stopEdit(),t.selected()||r.rows.selectRow(null,{},u),e=r.columns.columns()[i],e.editType=="twooptions")o=e.editValues,s=t.get(i),s==o[0]?t.set(i,o[1],!0):t.set(i,o[0],!0),r.fieldChange(i,t);else if(e.editType=="custom")typeof(e.customCallback=="function")&&e.customCallback(t,e.columnName);else if(e.editType!="boolean"&&e.editType!="checkbox"&&(t.values()[i].editing(!0),r.editing(!0),r.currentEdit({row:t,columnIndex:i,rowIndex:u}),e.editType=="textarea"))try{h=n(f.currentTarget).find("textarea")[0];r.rows.sizeTextarea(h)}catch(c){}};r.stopEdit=function(){if(r.editing()){var n=r.currentEdit();n!=null&&(n.row.values()[n.columnIndex].editing(!1),r.editing(!1),r.currentEdit(null))}};r.nextColumnEdit=function(t,i){var f,e,u,o;if(!r.editing()||i.keyCode!=9)return!0;for(i.stopPropagation(),i.stopImmediatePropagation(),f=r.currentEdit(),e=r.columns.columns(),u=f.columnIndex+(i.shiftKey?-1:1);u<e.length&&u>=0;i.shiftKey?u--:u++)if(e[u].editable&&f.row.values()[u].editable()&&n.inArray(e[u].editType,["textbox","textarea","picklist","date","money"])>-1)return r.currentEdit({row:f.row,columnIndex:u,rowIndex:f.rowIndex}),o=f.row.values(),o[u].editing(!0),o[u].editing()||o[u].editing(!0),!1;return r.stopEdit(),r.setFocus(!0),!1};r.fieldChange=function(n,t){var i=r.columns.columns()[n];typeof i.changeCallback=="function"&&i.changeCallback(t,i.columnName)};r.addStyle=function(t,i){var r,f;n.inArray(t,["border-bottom","border-top","background-color"])!=-1&&(r=u(this),r!=-1)&&(f=s(r),f.find("td").css(t,i))};r.addCellStyle=function(t,i,e){var h,o,s,c;if(n.inArray(i,["border-bottom","border-top","color","font-weight","rounded","background-color"])!=-1&&(h=u(this),h!=-1)&&(o=r.columns.getIndex(t),o!=-1))if(s=f(h,o),i=="rounded"){if(c=r.columns.get(o),c.editType!="checkbox")return;s.find(".po-crm-grid-Edit-checkboxBorder").css("border-radius","8px")}else i=="color"||i=="font-weight"?s.find("span").css(i,e):s.css(i,e)};r.addToolTip=function(t,i){var h=u(this),s,o,e;h!=-1&&(s=r.columns.getIndex(t),s!=-1)&&(o=f(h,s),o!=null&&(i==""?(e=n(o).find("span").find("title"),typeof e!="undefined"&&e!=null&&(n(e).hasClass("custom_tooltip")&&n(e).removeClass("custom_tooltip"),n(e).removeAttr("title"))):o.find("span").attr("title",i).addClass("custom_tooltip")))}}function e(){var n=this;n.loadMorePaging=!1;n.pagingEnabled=!0;n.currentPage=t.observable(1);n.totalRecords=t.observable(-1);n.totalExceeded=t.observable(!1);n.pageSize=t.observable(-1);n.previousPageTotal=t.computed(function(){return n.currentPage()==1?0:(n.currentPage()-1)*n.pageSize()});n.isPageingNotAllowed=i;n.OnPageingNotAllowed=function(){var t=n.isPageingNotAllowed;return typeof t=="function"?t():!1};n.pageFirstEnabled=t.observable(!1);n.pageFirst=i;n.onPageFirst=function(){if(!n.OnPageingNotAllowed()){n.currentPage(1);n.pageFirstEnabled(!1);n.pagePrevEnabled(!1);var t=n.pageFirst;typeof t=="function"&&t()}};n.pagePrevEnabled=t.observable(!1);n.pagePrev=i;n.onPagePrev=function(){if(!n.OnPageingNotAllowed()&&n.currentPage()>1){n.currentPage(n.currentPage()-1);n.currentPage()==1&&(n.pageFirstEnabled(!1),n.pagePrevEnabled(!1));var t=n.pagePrev;typeof t=="function"&&t()}};n.pageNextEnabled=t.observable(!1);n.pageNext=i;n.onPageNext=function(){if(!n.OnPageingNotAllowed()){n.currentPage()==1&&(n.pageFirstEnabled(!0),n.pagePrevEnabled(!0));n.loadMorePaging||n.currentPage(n.currentPage()+1);var t=n.pageNext;typeof t=="function"&&t()}};n.pageLastEnabled=t.observable(!1);n.pageLast=i;n.onPageLast=function(){if(!n.OnPageingNotAllowed()){var t=n.pageLast;typeof t=="function"&&t()}};n.setPage=function(t){var i=parseInt(t);i!=NaN&&i>0&&(t==1?(n.currentPage(1),n.pageFirstEnabled(!1),n.pagePrevEnabled(!1)):(n.currentPage(i),n.pageFirstEnabled(!0),n.pagePrevEnabled(!0)))}}function o(n){return String(n).replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")}function h(u,e){var w,b,a,h,y,k,v,l,p;if(!u)throw Error("Argument 'element' is required.");if(t.bindingHandlers.po_datagrid_allowbindings==i&&(t.bindingHandlers.po_datagrid_allowbindings={init:function(n,i){var r=t.utils.unwrapObservable(i());return{controlsDescendantBindings:!r}}}),t.bindingHandlers.po_datepicker==i&&(t.bindingHandlers.po_datepicker={init:function(t,i,r){var f=r().po_datepicker,u=n(t);f&&u.datepicker&&u.datepicker({showOtherMonths:!0,selectOtherMonths:!0,dateFormat:e&&e.dateFormat?e.dateFormat:"mm/dd/yy"})}}),w=n(o("&lt;div class=&quot;po-stdTable&quot; data-bind=&quot;po_datagrid_allowbindings: false&quot;&gt; &lt;div class=&quot;po-crm-absolutePosition&quot;&gt; &lt;div class=&quot;po-crm-IE7-Height-Fix-Dummy-Container&quot;&gt; &lt;div class=&quot;po-crm-relativePosition&quot;&gt; &lt;div class=&quot;po-crm-ListControl&quot; data-bind=&quot;event: { keydown: function (data, event) { rows.onKeyDown(data, event, currentEdit, stopEdit, setFocus, dblClickRow); return true } }, click: function (data, event) { $root.stopEdit(); }&quot; tabindex=&quot;5&quot;&gt; &lt;div class=&quot;po-crm-grid-body&quot; style=&quot;bottom: 25px;&quot; data-bind=&quot;style: { bottom: isJumpBarVisible ? '25px' : '0px' }&quot;&gt; &lt;div class=&quot;po-crm-IE7-Height-Fix-Dummy-Container&quot;&gt; &lt;div class=&quot;po-crm-relativePosition&quot;&gt; &lt;!-- ko if: refreshEnabled --&gt; &lt;div class=&quot;po-crm-List-RefreshButton&quot; &gt; &lt;img class=&quot;po-crm-GridRefreshImage&quot; src=&quot;../ds_/datagrid/img/grid_Refresh.gif&quot; onmouseover=&quot;this.src='../ds_/datagrid/img/grid_refresh_hover.gif'&quot; onmouseout=&quot;this.src='../ds_/datagrid/img/grid_Refresh.gif'&quot; data-bind=&quot;click: onRefresh&quot;/&gt; &lt;/div&gt; &lt;!-- /ko --&gt; &lt;div class=&quot;po-crm-ListArea&quot; style=&quot;position: relative;&quot;&gt; &lt;!-- Columns Bar --&gt; &lt;div class=&quot;po-crm-grid-headercontainer&quot;&gt; &lt;div class=&quot;po-crm-ListArea-FixedRow&quot;&gt; &lt;table class=&quot;po-crm-List-Header&quot; cellspacing=&quot;0&quot; cellpadding=&quot;0&quot;&gt; &lt;colgroup&gt; &lt;!-- ko if: ((selectColumnVisible &amp;&amp; rows.rowSelectionType != &quot;none&quot;) || rowIconsVisible) --&gt; &lt;col class=&quot;po-crm-List-NonDataColumnHeader&quot; data-bind=&quot;style: { width: rowIconsVisible ? (selectColumnVisible &amp;&amp; rows.rowSelectionType != 'none') ? '34px' : '25px' : '25px' }&quot; /&gt; &lt;col style=&quot;width:2px&quot;/&gt; &lt;!-- /ko --&gt; &lt;!-- ko if: attachmentColumnVisible --&gt; &lt;col class=&quot;po-crm-List-NonDataColumnHeader&quot; style=&quot;width:25px;&quot;/&gt; &lt;col style=&quot;width:2px;&quot;/&gt; &lt;!-- /ko --&gt; &lt;!-- ko foreach: columns.columns --&gt; &lt;col class=&quot;po-crm-List-DataColumnHeader&quot; data-bind=&quot;attr: { width: width }, visible: visible&quot; /&gt; &lt;col style=&quot;width:2px&quot; data-bind=&quot;visible: visible&quot; /&gt; &lt;!-- /ko --&gt; &lt;col style=&quot;width:20px&quot;/&gt; &lt;col /&gt; &lt;/colgroup&gt; &lt;tbody&gt; &lt;tr class=&quot;po-crm-Header-Row&quot;&gt; &lt;!-- ko if: ((selectColumnVisible &amp;&amp; rows.rowSelectionType != &quot;none&quot;) || rowIconsVisible) --&gt; &lt;th class=&quot;po-crm-NonDataColumn&quot;&gt; &lt;!-- ko if: (selectColumnVisible &amp;&amp; rows.rowSelectionType !=&quot;none&quot;) --&gt; &lt;img class=&quot;po-crm-ImageStrip-checkbox&quot; src=&quot;../ds_/datagrid/img/checkbox.png&quot; data-bind=&quot;click: function (data, event) { $root.rows.selectCheck(data, event, -1) }&quot;/&gt; &lt;!-- /ko --&gt; &lt;/th&gt; &lt;th&gt; &lt;img class=&quot;po-crm-ImageStrip-bar_line&quot; src=&quot;../ds_/datagrid/img/bar_line.gif&quot; /&gt; &lt;/th&gt; &lt;!-- /ko --&gt; &lt;!-- ko if: attachmentColumnVisible --&gt; &lt;th class=&quot;po-crm-NonDataColumn&quot;&gt; &lt;img class=&quot;po-crm-AttachmentImage&quot; src=&quot;../ds_/datagrid/img/attachment32.png&quot; /&gt; &lt;/th&gt; &lt;th&gt; &lt;img class=&quot;po-crm-ImageStrip-bar_line&quot; src=&quot;../ds_/datagrid/img/bar_line.gif&quot; /&gt; &lt;/th&gt; &lt;!-- /ko --&gt; &lt;!-- ko foreach: columns.columns --&gt; &lt;th class=&quot;po-crm-List-Column&quot; scope=&quot;col&quot; data-bind=&quot;css: { 'po-crm-List-Sortable': ($root.allowSorting &amp;&amp; sortable) }, event: { click: function (data, event) { if ($root.allowSorting &amp;&amp; sortable) { $root.sorting.changeSort(columnName, '', sortOnColumn, sortOrder, data, event); } } }, visible: visible&quot;&gt; &lt;label class=&quot;po-crm-List-Column&quot;&gt; &lt;span data-bind=&quot;text: displayName&quot;&gt;&lt;/span&gt; &lt;!-- ko if: required --&gt; &lt;img src=&quot;../ds_/datagrid/img/frm_required.gif&quot; /&gt; &lt;!-- /ko --&gt; &lt;/label&gt; &lt;!-- ko if: $root.allowSorting &amp;&amp; sortOnColumn() --&gt; &lt;img class=&quot;po-crm-List-Column po-crm-ImageStrip-sorting&quot; src=&quot;../ds_/datagrid/img/sorting_down.png&quot; data-bind=&quot;attr: { src: sortOrder() == 'descending' ? '../ds_/datagrid/img/sorting_down.png' : sortOrder() == 'ascending' ? '../ds_/datagrid/img/sorting_up.png' : '' }&quot;/&gt; &lt;!-- /ko --&gt; &lt;/th&gt; &lt;th data-bind=&quot;visible: visible&quot;&gt; &lt;img class=&quot;po-crm-ImageStrip-resize&quot; src=&quot;../ds_/datagrid/img/resize.gif&quot; data-bind=&quot;event: { mousedown: mousedown }, visible: resizeVisible, css: { 'po-crm-List-ResizeBar': resizeable }&quot; /&gt; &lt;/th&gt; &lt;!-- /ko --&gt; &lt;th&gt;&lt;/th&gt; &lt;th&gt;&lt;/th&gt; &lt;/tr&gt; &lt;/tbody&gt; &lt;/table&gt; &lt;/div&gt; &lt;/div&gt; &lt;!-- End Columns Bar --&gt; &lt;!-- Rows --&gt; &lt;div class=&quot;po-crm-grid-databodycontainer&quot; data-bind=&quot;style: { bottom: paging.pagingEnabled ? '26px' : '0px' }&quot;&gt; &lt;div class=&quot;po-crm-IE7-Height-Fix-Dummy-Container&quot;&gt; &lt;!-- ko if: showLoader --&gt; &lt;div class=&quot;po-crm-grid-Loader&quot;&gt; &lt;img src=&quot;../ds_/datagrid/img/processing_loader.gif&quot; /&gt;&lt;br /&gt; &lt;/div&gt; &lt;!-- ko if: loadingMessage != '' --&gt; &lt;div class=&quot;po-crm-grid-LoadingMessage&quot; data-bind=&quot;text: loadingMessage&quot;&gt;&lt;/div&gt; &lt;!-- /ko --&gt; &lt;!-- /ko --&gt; &lt;div class=&quot;po-crm-List-DataBody&quot;&gt; &lt;div class=&quot;po-crm-List-DataArea&quot;&gt; &lt;table class=&quot;po-crm-List-Data&quot; cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; data-bind=&quot;style: { 'height': rows.rows().length == 0 ? '100%' : 'auto' }&quot;&gt; &lt;colgroup&gt; &lt;!-- ko if: ((selectColumnVisible &amp;&amp; rows.rowSelectionType != &quot;none&quot;) || rowIconsVisible) --&gt; &lt;col data-bind=&quot;style: { width: rowIconsVisible ? (selectColumnVisible &amp;&amp; rows.rowSelectionType != 'none') ? '36px' : '27px' : '27px' }&quot; /&gt; &lt;!-- /ko --&gt; &lt;!-- ko if: attachmentColumnVisible --&gt; &lt;col style=&quot;width:27px;&quot; /&gt; &lt;!-- /ko --&gt; &lt;!-- ko foreach: columns.columns --&gt; &lt;col class=&quot;po-crm-List-DataColumn&quot; data-bind=&quot;attr: { width: width }, visible: visible&quot; /&gt; &lt;col style=&quot;width:2px;&quot; data-bind=&quot;visible: visible&quot; /&gt; &lt;!-- /ko --&gt; &lt;col /&gt; &lt;/colgroup&gt; &lt;tbody&gt; &lt;!-- ko if: rows.rows().length == 0 --&gt; &lt;tr style=&quot;height:0px;&quot;&gt; &lt;!-- ko if: ((selectColumnVisible &amp;&amp; rows.rowSelectionType != &quot;none&quot;) || rowIconsVisible) --&gt; &lt;td&gt;&lt;/td&gt; &lt;!-- /ko --&gt; &lt;!-- ko if: attachmentColumnVisible --&gt; &lt;td&gt;&lt;/td&gt; &lt;!-- /ko --&gt; &lt;!-- ko foreach: columns.columns --&gt; &lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt; &lt;!-- /ko --&gt; &lt;td&gt;&lt;/td&gt; &lt;/tr&gt; &lt;tr style=&quot;text-align:center;height:100%;&quot;&gt;&lt;td class=&quot;po-crm-grid-GridMessage&quot; data-bind=&quot;attr: { colspan: ((columns.columns().length * 2) + 3) }, text: $root.showMessage ? $root.message : ''&quot;&gt;&lt;/td&gt;&lt;/tr&gt; &lt;!-- /ko --&gt; &lt;!-- ko foreach: rows.rows --&gt; &lt;tr class=&quot;po-crm-List-Row&quot; data-bind=&quot;css: { 'po-crm-List-Row-Hover': ($root.rows.allowSelection() &amp;&amp; !selected()), 'po-row-Selected': selected() }, event: { dblclick: function (data, event) { event.stopPropagation(); $root.onDblClickRow($data); } }, click: function (data, event) { event.stopPropagation(); $root.setFocus(true); $root.rows.selectRow(data, event, $index()) }&quot;&gt; &lt;!-- ko if: (($root.selectColumnVisible &amp;&amp; $root.rows.rowSelectionType != &quot;none&quot;) || $root.rowIconsVisible) --&gt; &lt;td class=&quot;po-crm-List-NonDataCell&quot; data-bind=&quot;style: { 'text-align': ($root.selectColumnVisible &amp;&amp; $root.rows.rowSelectionType != 'none') ? 'left' : 'center' }&quot;&gt; &lt;!-- ko if: ($root.selectColumnVisible &amp;&amp; $root.rows.rowSelectionType != &quot;none&quot;) --&gt; &lt;img data-bind=&quot;event: { dblclick: function (data, event) { event.stopPropagation(); $root.setFocus(true); $root.onDblClickRow($data); } }, click: function (data, event) { $root.setFocus(true); $root.stopEdit(); $root.rows.selectCheck(data, event, $index()) }, style: { 'padding-left': $root.rowIconsVisible ? '1px' : '7px' }, css: { 'po-crm-ImageStrip-checkbox': selected(), 'po-crm-ImageStrip-checkbox_light': !selected() }, attr: { src: selected() ? '../ds_/datagrid/img/checkbox.png' : '../ds_/datagrid/img/checkbox_light.png' }&quot; /&gt; &lt;!-- /ko --&gt; &lt;!-- ko if: ($root.rowIconsVisible &amp;&amp; image != &quot;&quot;) --&gt; &lt;img class=&quot;po-crm-grid-RowImage&quot; data-bind=&quot;attr: { src: image }&quot; /&gt; &lt;!-- /ko --&gt; &lt;/td&gt; &lt;!-- /ko --&gt; &lt;!-- ko if: $root.attachmentColumnVisible --&gt; &lt;td class=&quot;po-crm-List-NonDataCell&quot; style=&quot;text-align:center&quot;&gt; &lt;!-- ko if: hasAttachment --&gt; &lt;img class=&quot;po-crm-AttachmentImage&quot; src=&quot;../ds_/datagrid/img/attachment32.png&quot; style=&quot;padding-right:2px;&quot;/&gt; &lt;!-- /ko --&gt; &lt;/td&gt; &lt;!-- /ko --&gt; &lt;!-- ko foreach: values --&gt; &lt;td class=&quot;po-crm-List-DataCell po-inner-grid-cellPadding&quot; data-bind=&quot;css: { 'po-crm-NumbersAndDates': $root.columns.isRightAlign($index()) }, click: function (data, event) { if (!$root.columns.columns()[$index()].editable || !$root.allowEditing || !$parent.editable || !editable()) return; event.stopPropagation(); $root.onEdit($parent, $index(), $parentContext.$index(), event) }, visible: $root.columns.columns()[$index()].visible&quot;&gt; &lt;div data-bind=&quot;visible: visible&quot;&gt; &lt;div data-bind=&quot;css: { 'po-crm-grid-noWrap': $root.columns.columns()[$index()].editType != 'textarea', 'po-crm-grid-wordWrap': $root.columns.columns()[$index()].editType == 'textarea' }, visible: !$data.editing() &amp;&amp; $root.columns.columns()[$index()].editType != 'boolean' &amp;&amp; $root.columns.columns()[$index()].editType != 'checkbox'&quot;&gt; &lt;!-- ko if: ($data != undefined &amp;&amp; $data.value() != undefined &amp;&amp; $data.value().image != undefined) --&gt; &lt;img class=&quot;po-crm-grid-CellImage&quot; data-bind=&quot;attr: { src: $data.value().image }&quot; /&gt; &lt;!-- /ko --&gt; &lt;span data-bind=&quot;text: (!$root.columns.columns()[$index()].editable || ($data.value() != '' &amp;&amp; $data.value() != null)) ? ($root.columns.columns()[$index()].editType == 'money' ? $root.currencySymbol : '') + $data.value() : '--', css: { 'po-crm-grid-DrillInto': $root.columns.columns()[$index()].drillInto }, click: function (data, event) { if ($root.columns.columns()[$index()].drillInto) { event.stopPropagation(); $root.onDrillInto($parent, $index()) } }, event: { touchend: function (data, event) { if ($root.columns.columns()[$index()].drillInto) { event.stopPropagation(); $root.onDrillInto($parent, $index()) } } }&quot;&gt;&lt;/span&gt; &lt;/div&gt; &lt;!-- ko if: $root.columns.columns()[$index()].editable &amp;&amp; $parent.editable &amp;&amp; ($data.editing() || $root.columns.columns()[$index()].editType == &quot;date&quot;) --&gt; &lt;div class=&quot;po-crm-grid-Edit-container&quot; data-bind=&quot;visible: $data.editing() || $root.columns.columns()[$index()].editType == 'boolean', event: { keydown: $root.nextColumnEdit }&quot;&gt; &lt;!-- ko if: $root.columns.columns()[$index()].editType == &quot;textarea&quot; --&gt; &lt;textarea class=&quot;po-crm-grid-Edit-textarea&quot; rows=&quot;1&quot; data-bind=&quot;hasFocus: $data.editing, value: $data.value, valueUpdate: 'keyup', click: function (data, event) { event.stopPropagation(); return true; }, event: { keyup: $root.rows.textareaRows, change: function (data, event) { $root.fieldChange($index(), $parent); } }&quot;&gt;&lt;/textarea&gt; &lt;!-- /ko --&gt; &lt;!-- ko if: $root.columns.columns()[$index()].editType == &quot;textbox&quot; || $root.columns.columns()[$index()].editType == &quot;date&quot; || $root.columns.columns()[$index()].editType == &quot;money&quot; --&gt; &lt;input type=&quot;text&quot; class=&quot;po-crm-grid-Edit-textbox&quot; data-bind=&quot;hasFocus: $data.editing, css: { 'po-crm-NumbersAndDates': $root.columns.isRightAlign($index()) }, value: $data.value, valueUpdate: 'keyup', click: function (data, event) { event.stopPropagation(); return true; }, po_datepicker: ($root.columns.columns()[$index()].editType == 'date' ? true : false), event: { change: function (data, event) { $root.fieldChange($index(), $parent); } }&quot; /&gt; &lt;!-- /ko --&gt; &lt;!-- ko if: $root.columns.columns()[$index()].editType == &quot;picklist&quot; --&gt; &lt;select class=&quot;po-crm-grid-Edit-select&quot; data-bind=&quot;hasFocus: $data.editing, value: $data.value, options: $root.columns.columns()[$index()].editValues, click: function (data, event) { event.stopPropagation(); }, event: { change: function (data, event) { $root.fieldChange($index(), $parent); } }&quot;&gt;&lt;/select&gt; &lt;!-- /ko --&gt; &lt;/div&gt; &lt;!-- /ko --&gt; &lt;!-- ko if: $root.columns.columns()[$index()].editType == &quot;boolean&quot; || $root.columns.columns()[$index()].editType == &quot;checkbox&quot; --&gt; &lt;div class=&quot;po-crm-grid-Edit-booleanContainer&quot; data-bind=&quot;css: { 'po-crm-grid-Edit-checkboxBorder': $root.columns.columns()[$index()].editType == 'checkbox' }&quot;&gt; &lt;div class=&quot;po-crm-grid-Edit-boolean&quot; data-bind=&quot;css: { 'po-crm-grid-Edit-boolean-true': $data.value() ? true : false, 'po-crm-grid-Edit-boolean-false': $data.value() ? false : true }, click: function () { if ($root.columns.columns()[$index()].editable &amp;&amp; $root.allowEditing &amp;&amp; $parent.editable &amp;&amp; editable()) { $data.value($data.value() ? false : true); $root.fieldChange($index(), $parent); } }&quot;&gt;&lt;/div&gt; &lt;/div&gt; &lt;!-- /ko --&gt; &lt;/div&gt; &lt;/td&gt; &lt;td data-bind=&quot;visible: $root.columns.columns()[$index()].visible&quot;&gt;&lt;/td&gt; &lt;!-- /ko --&gt; &lt;td&gt;&lt;/td&gt; &lt;/tr&gt; &lt;!-- /ko --&gt; &lt;/tbody&gt; &lt;/table&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;!-- END Rows --&gt; &lt;!-- Page Toolbar --&gt; &lt;div class=&quot;po-crm-List-StatusBar&quot; data-bind=&quot;style: { height: paging.pagingEnabled ? '22px' : '1px' }&quot;&gt; &lt;!-- ko with: paging --&gt; &lt;table class=&quot;po-crm-List-StatusBar&quot;&gt; &lt;tbody&gt; &lt;!-- ko if: pagingEnabled --&gt; &lt;tr&gt; &lt;td class=&quot;po-crm-List-StatusBar-Label&quot;&gt; &lt;!-- ko if: $root.numRecords() &gt; 0 --&gt; &lt;span data-bind=&quot;text: (previousPageTotal() + 1)&quot;&gt;&lt;/span&gt; &lt;span&gt; - &lt;/span&gt; &lt;span data-bind=&quot;text: (previousPageTotal() + $root.numRecords())&quot;&gt;&lt;/span&gt; &lt;!-- ko if: totalRecords() &gt; -1 --&gt; &lt;span&gt; of &lt;/span&gt; &lt;span data-bind=&quot;text: totalRecords&quot;&gt;&lt;/span&gt;&lt;span data-bind=&quot;visible: totalExceeded&quot;&gt;+&lt;/span&gt; &lt;!-- /ko --&gt; &lt;span&gt; (&lt;span data-bind=&quot;text: $root.rows.numSelectedRows()&quot;&gt;&lt;/span&gt;&lt;/span&gt; &lt;span&gt; selected)&lt;/span&gt; &lt;!-- /ko --&gt; &lt;/td&gt; &lt;td class=&quot;po-crm-List-Paging&quot;&gt; &lt;!-- ko ifnot: loadMorePaging --&gt; &lt;span class=&quot;toolbarbutton&quot;&gt; &lt;img class=&quot;po-crm-ImageStrip-page&quot; data-bind=&quot;css: { 'po-crm-Paging-Enabled': pageFirstEnabled }, attr: { src: pageFirstEnabled() ? '../ds_/datagrid/img/page_FL1.gif' : '../ds_/datagrid/img/page_FL0.gif' }, click: function () { if (pageFirstEnabled()) onPageFirst(); }&quot;/&gt; &lt;/span&gt; &lt;span class=&quot;toolbarbutton&quot;&gt; &lt;img class=&quot;po-crm-ImageStrip-page&quot; data-bind=&quot;css: { 'po-crm-Paging-Enabled': pagePrevEnabled }, attr: { src: pagePrevEnabled() ? '../ds_/datagrid/img/page_L1.gif' : '../ds_/datagrid/img/page_L0.gif' }, click: function () { if (pagePrevEnabled()) onPagePrev(); }&quot; /&gt; &lt;/span&gt; &lt;span&gt;Page &lt;/span&gt; &lt;span data-bind=&quot;text: currentPage&quot;&gt;&lt;/span&gt; &lt;!-- /ko --&gt; &lt;!-- ko if: loadMorePaging --&gt; &lt;span&gt;Load More &lt;/span&gt; &lt;!-- /ko --&gt; &lt;span class=&quot;toolbarbutton&quot;&gt; &lt;img class=&quot;po-crm-ImageStrip-page&quot; data-bind=&quot;css: { 'po-crm-Paging-Enabled': pageNextEnabled }, attr: { src: pageNextEnabled() ? '../ds_/datagrid/img/page_R1.gif' : '../ds_/datagrid/img/page_R0.gif' }, click: function () { if (pageNextEnabled()) onPageNext(); }&quot; /&gt; &lt;/span&gt;&amp;nbsp; &lt;/td&gt; &lt;/tr&gt; &lt;!-- /ko --&gt; &lt;/tbody&gt; &lt;/table&gt; &lt;!-- /ko --&gt; &lt;/div&gt; &lt;!-- End Page Toolbar --&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;!-- ko if: isJumpBarVisible --&gt; &lt;div class=&quot;po-crm-grid-footer&quot;&gt; &lt;table class=&quot;po-crm-List-Index&quot;&gt; &lt;tbody&gt; &lt;!-- ko with: sorting --&gt; &lt;tr&gt; &lt;!-- ko foreach: jumpBarOptions --&gt; &lt;td data-bind=&quot;css: { 'po-crm-List-SelectedIndex': $parent.jumpBarSort() == $data }, text: $data, click: function () { $parent.onJumpBarSort($data) }&quot;&gt;&lt;/td&gt; &lt;!-- /ko --&gt; &lt;/tr&gt; &lt;!-- /ko --&gt; &lt;/tbody&gt; &lt;/table&gt; &lt;/div&gt; &lt;!-- /ko --&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt;")),n(u).html(w),n(u).bind("contextmenu",function(t){return(t.originalEvent.srcElement==i&&(t.originalEvent.srcElement=t.originalEvent.target),n.inArray(t.originalEvent.srcElement.nodeName.toLowerCase(),["input","textarea"])!=-1)?!0:!1}),b=n(u).find(".po-crm-ListArea").children(":first-child"),a=n(u).find(".po-crm-List-DataArea"),a.scroll(function(){b.scrollLeft(a.scrollLeft())}),h=new f,y=!1,h.rows.dataElement=a,k=!0,n(document).click(h.stopEdit),e!=i&&e!=null){if(e.allowSorting!=i&&(h.allowSorting=e.allowSorting?!0:!1),e.columns&&e.columns.length>0)for(v=0;v<e.columns.length;++v)(l=e.columns[v],l.name!=i&&l.name!=null)&&h.columns.add(new c(l.name,l.display,l.dataType,l.controlType,l.width,l.textAlign,l.sortable,l.drillInto,l.visible,l.editable,l.editType,l.editValues,l.customCallback,l.required,l.changeCallback,l.resizeable,l.resizeVisible));e.isJumpBarVisible!=i&&e.isJumpBarVisible!=null&&(h.isJumpBarVisible=e.isJumpBarVisible?!0:!1,h.isJumpBarVisible&&(n(".po-crm-grid-footer").each(function(){var t=this;t.clientWidth<800?n(t).css({visibility:"hidden"}):n(t).css({visibility:"visible"})}),n(window).resize(function(){n(".po-crm-grid-footer").each(function(){var t=this;t.clientWidth<800?n(t).css({visibility:"hidden"}):n(t).css({visibility:"visible"})})})));e.rowSelectionType!=i&&e.rowSelectionType!=null&&(h.rows.rowSelectionType=e.rowSelectionType);e.paging!=i&&e.paging!=null&&(h.paging.pageFirst=e.paging.pageFirst,h.paging.pagePrev=e.paging.pagePrev,h.paging.pageNext=e.paging.pageNext,h.paging.pageLast=e.paging.pageLast,h.paging.isPageingNotAllowed=e.paging.isPageingNotAllowed,h.paging.loadMorePaging=typeof e.paging.loadMore=="boolean"?e.paging.loadMore:!1,e.paging.pageSize!=i&&typeof e.paging.pageSize=="number"&&h.paging.pageSize(e.paging.pageSize),e.paging.totalRecords!=i&&typeof e.paging.totalRecords=="number"&&h.paging.totalRecords(e.paging.totalRecords),e.paging.totalExceeded!=i&&e.paging.totalExceeded==!0&&h.paging.totalExceeded(!0),e.paging.pagingEnabled==i||e.paging.pagingEnabled||(h.paging.pagingEnabled=!1));e.rowIconsVisible!=i&&(h.rowIconsVisible=e.rowIconsVisible?!0:!1);e.attachmentColumnVisible!=i&&(h.attachmentColumnVisible=e.attachmentColumnVisible?!0:!1);e.selectColumnVisible!=i&&(h.selectColumnVisible=e.selectColumnVisible?!0:!1);e.refresh!=i&&(h.refresh=e.refresh);e.refreshEnabled==i||e.refreshEnabled||(h.refreshEnabled=!1);e.drillInto!=i&&(h.drillInto=e.drillInto);e.sort!=i&&(h.sorting.sort=e.sort);e.filter!=i&&(h.sorting.filter=e.filter);e.dblClickRow!=i&&(h.dblClickRow=e.dblClickRow);e.rowChanging!=i&&(h.rows.rowChanging=e.rowChanging);e.rowChanged!=i&&(h.rows.rowChanged=e.rowChanged);e.draggable!=i&&e.draggable&&(a.find("table").find("tr").draggable!=i?y=!0:alert("Cannot enable dragging, jQuery UI is required"));e.currencySymbol!=i&&(h.currencySymbol=e.currencySymbol)}p=n(u).find(".po-crm-ListControl");h.bindingElement=p;t.applyBindings(h,p[0]);this.newRow=function(){var n=new r(h.columns);return n.addStyle=h.addStyle,n.addCellStyle=h.addCellStyle,n.addToolTip=h.addToolTip,n};this.clear=function(){h.rows.rows.removeAll()};this.showLoader=function(n){n!=i&&h.loadingMessage(n);h.showLoader(!0)};this.hideLoader=function(){h.showLoader(!1);h.loadingMessage("")};this.showMessage=function(n){h.message(n);h.showMessage(!0)};this.hideMessage=function(){h.showMessage(!1);h.message("")};this.getSelectedRows=function(){var i=h.rows.rowSelectionType,t,r,n;if(i=="none")return null;if(i=="single"){for(t=h.rows.rows(),n=0;n<t.length;n++)if(t[n].selected())return t[n];return null}if(i=="multiple"){for(t=h.rows.rows(),r=[],n=0;n<t.length;n++)t[n].selected()&&r.push(t[n]);return r}};this.getRow=function(n){return n>=0&&n<h.rows.rows().length?h.rows.rows()[n]:null};this.getAllRows=function(){return h.rows.rows()};this.getAllColumns=function(){return s.columns.columns()};this.resize=function(){n(".po-crm-grid-footer").each(function(){var t=this;t.clientWidth<800?n(t).css({visibility:"hidden"}):n(t).css({visibility:"visible"})})};this.getSortOrder=function(){return h.sorting.columnOrder};this.getFilter=function(){return h.sorting.jumpBarSort()};this.setFilter=function(t){n.inArray(t,["All","#","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"])!=-1&&h.sorting.jumpBarSort(t)};this.addSort=function(n,t){h.sorting.addSort(n,t)};this.setSort=function(n){h.sorting.setSort(n)};this.addRow=function(t,i){(h.rows.add(t,i),y)&&a.find("table").find("tr").draggable({helper:function(t){var r=n(t.target).closest("tr").clone(),u=t.currentTarget.rowIndex,i;return h.rows.selectRow({},{},u),i=n('<div><table style="background-color:white;border:solid thin #666666;"><\/table><\/div>').find("table").append(r).end().insertAfter(a.find("table")),i.find("td").css("background-color","white").css("border-bottom","none"),i},cursorAt:{left:-1,bottom:1},cursor:"move",distance:30,delay:100,revert:"invalid",scope:"poRowItem",scroll:!1})};this.removeRow=function(n){h.rows.rows.remove(n)};this.sort=function(n){typeof n=="function"?h.rows.rows.sort(n):h.rows.rows.sort()};this.pageNextEnabled=function(n){h.paging.pageNextEnabled(n)};this.pageFirstEnabled=function(n){h.paging.pageFirstEnabled(n)};this.pagePrevEnabled=function(n){h.paging.pagePrevEnabled(n)};this.loadMoreEnabled=function(n){h.paging.pageNextEnabled(n)};this.pageLastEnabled=function(n){h.paging.pageLastEnabled(n)};this.pageSize=function(n){h.paging.pageSize(n)};this.setPage=function(n){h.paging.setPage(n)};this.totalRecords=function(n){h.paging.totalRecords(n)};this.totalExceeded=function(n){n?h.paging.totalExceeded(!0):h.paging.totalExceeded(!1)};this.rowsCount=function(){return h.rows.rows().length};this.selectRow=function(n){h.rows.selectRow(null,{},n,!0);h.setFocus(!0)};this.allowEditing=function(n){n?h.allowEditing=!0:(h.allowEditing=!1,h.stopEdit())};this.setVisible=function(n,t){var i=h.columns.get(n);i!=null&&(t?i.visible(!0):i.visible(!1))};this.setEditable=function(n,t){var i=h.columns.get(n);i!=null&&(i.editable=t?!0:!1)};this.setFocus=function(n){h.setFocus(n)}}function c(r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d){var g=this,nt;g.visible=t.observable(l==i?!0:l?!0:!1);g.drillInto=c||!1;g.editable=a?!0:!1;g.editType=n.inArray(v,["textarea","textbox","date","picklist","custom","twooptions","money","boolean","checkbox"])!=-1?v:"textbox";g.editValues=y!=i&&y!=null?g.editType=="picklist"?y:g.editType=="twooptions"&&y.length==2?y:["",""]:[];g.customCallback=p;g.columnName=r;g.displayName=u||"";g.dataType=f||"string";g.controlType=e||"text";g.required=w?!0:!1;g.resizeVisible=d==i||d?!0:!1;g.resizeable=k==i||k?!0:!1;nt=o||100;g.width=t.observable(nt);g.textAlign=s||"left";g.sortable=h!=i?h?!0:!1:!0;g.changeCallback=b;g.xold=-1;g.sortOnColumn=t.observable(!1);g.sortOrder=t.observable("");g.mousedown=function(n,t){g.resizeable&&(g.xold=t.clientX)};n(".po-crm-ListArea").mousemove(function(n){var t,i,r;g.xold!=-1&&((t=g.xold-n.clientX,t>0&&g.width()<=16)||(i=g.width()-t,g.xold=n.clientX,r=i<=16?16:i,g.width(r)))});n(".po-crm-ListArea").mouseup(function(){g.xold=-1})}function l(){var n=this;n.columns=t.observableArray([]);n.add=function(t){n.columns.push(t)};n.count=function(){return n.columns().length};n.isRightAlign=function(t){return n.columns()[t].textAlign=="right"};n.get=function(t){var i=null,r=n.getIndex(t);return r!=-1&&(i=n.columns()[r]),i};n.getIndex=function(t){var r=-1,i;switch(typeof t){case"string":for(i=0;i<n.columns().length;++i)if(n.columns()[i].columnName==t){r=i;break}break;case"number":t>=0&&t<n.columns().length&&(r=t)}return r}}function r(i){var r=this,o,e,f;for(r.values=t.observable(new v(i.columns().length)),r.image="",r.selected=t.observable(!1),r.hasAttachment=!1,r.id="",r.dirty=!1,r.editable=!0,o=t.computed(function(){for(var t,i,u=r.values(),f=!1,n=0;n<u.length;n++)if(t=u[n].value(),i=u[n].originalValue(),t!=i){if(t==null&&i==""||t==""&&i==null)continue;f=!0}r.dirty=f}),r.columnDirty=function(n){var u=i.getIndex(n),t;return u==-1?!1:(t=r.values()[u],t.value()==t.originalValue()?!1:!0)},r.get=function(n){var t=null,u=i.getIndex(n);return u!=-1&&(t=r.values()[u].value()),t},r.set=function(n,t,u){var f=i.getIndex(n);f!=-1&&(u==!1&&r.values()[f].originalValue(t),r.values()[f].value(t))},r.resetDirty=function(){for(var t=r.values(),n=0;n<t.length;n++)t[n].originalValue(t[n].value())},r.requirementsMet=function(){for(var e,o=!0,f=i.columns(),t=0;t<f.length;t++)f[t].required&&n.inArray(f[t].editType,["textarea","textbox","date","custom","money"])!=-1&&(e=r.get(f[t].columnName),(e==u||e==null||e==""||e=="0")&&(r.set(f[t].columnName,u,!0),o=!1));return o},r.setEditable=function(n,t){var u=i.getIndex(n);u!=-1&&r.values()[u].editable(t?!0:!1)},r.setVisible=function(n,t){var u=i.getIndex(n);u!=-1&&r.values()[u].visible(t?!0:!1)},e=i.columns(),f=0;f<e.length;f++)e[f].editable&&(e[f].editType=="twooptions"||e[f].editType=="picklist"?r.set(e[f].columnName,e[f].editValues[0],!1):(e[f].editType=="boolean"||e[f].editType=="checkbox")&&r.set(e[f].columnName,!1,!1))}function a(){function f(n){if(!(n<0)&&!(n>=u.rows().length)&&u.dataElement&&u.dataElement.scrollTop&&!o(n)){var t=n*29;u.dataElement.scrollTop(t)}}function e(n){if(!(n<0)&&!(n>=u.rows().length)&&u.dataElement&&u.dataElement.scrollTop&&!o(n)){var t=n*29-u.dataElement.height()+29;u.dataElement[0].scrollWidth>u.dataElement[0].clientWidth&&(t+=15);u.dataElement.scrollTop(t)}}function o(n){var t=u.dataElement.find("tbody").find("tr").eq(n).position();if(t.top<0)return!1;if(u.dataElement[0].scrollWidth>u.dataElement[0].clientWidth){if(t.top>u.dataElement.height()-44)return!1}else if(t.top>u.dataElement.height()-29)return!1;return!0}var u=this;u.dataElement=i;u.rows=t.observableArray([]);u.numSelectedRows=t.computed(function(){for(var t=0,n=0;n<u.rows().length;n++)u.rows()[n].selected()&&t++;return t});u.rowSelectionType="single";u.allowSelection=function(){return u.rowSelectionType=="single"||u.rowSelectionType=="multiple"?!0:!1};u.lastSelectedIndex=-1;u.lastShiftIndex=-1;u.onKeyDown=function(t,r,o,s,h,c){var a,l;if(r.keyCode==38||r.keyCode==40)r.preventDefault(),a=u.rows(),o()!=null&&o().row.values()[o().columnIndex].editing()&&(l=r.keyCode==38?o().rowIndex-1:o().rowIndex+1,l>=0&&l<a.length&&(a[l].editable&&a[l].values()[o().columnIndex].editable()?(o({row:a[l],columnIndex:o().columnIndex,rowIndex:l}),a[l].values()[o().columnIndex].editing(!0)):(s(),h(!0))));else{if(r.keyCode==13){r.ctrlKey||r.shiftKey||(r.originalEvent.srcElement==i&&(r.originalEvent.srcElement=r.originalEvent.target),n.inArray(r.originalEvent.srcElement.nodeName.toLowerCase(),["input","textarea","select"])==-1&&(u.rowSelectionType=="single"?u.lastSelectedIndex!=-1&&u.numSelectedRows()!=0&&c(u.rows()[u.lastSelectedIndex]):u.rowSelectionType=="multiple"&&u.lastShiftIndex!=-1&&u.numSelectedRows()!=0&&c(u.rows()[u.lastShiftIndex])));return}return!0}u.rowSelectionType=="single"?r.keyCode==38?(f(u.lastSelectedIndex-1),u.selectRow(null,null,u.lastSelectedIndex-1)):r.keyCode==40&&(e(u.lastSelectedIndex+1),u.selectRow(null,null,u.lastSelectedIndex+1)):u.rowSelectionType=="multiple"&&(r.ctrlKey?r.keyCode==38?(f(u.lastSelectedIndex-1),u.selectRow(null,{shiftKey:!1,ctrlKey:!0},u.lastSelectedIndex-1)):r.keyCode==40&&(e(u.lastSelectedIndex+1),u.selectRow(null,{shiftKey:!1,ctrlKey:!0},u.lastSelectedIndex+1)):r.shiftKey?r.keyCode==38?(f(u.lastShiftIndex-1),u.selectRow(null,{shiftKey:!0,ctrlKey:!1},u.lastShiftIndex-1)):r.keyCode==40&&(e(u.lastShiftIndex+1),u.selectRow(null,{shiftKey:!0,ctrlKey:!1},u.lastShiftIndex+1)):r.keyCode==38?(f(u.lastSelectedIndex-1),u.selectRow(null,{shiftKey:!1,ctrlKey:!1},u.lastSelectedIndex-1)):r.keyCode==40&&(e(u.lastSelectedIndex+1),u.selectRow(null,{shiftKey:!1,ctrlKey:!1},u.lastSelectedIndex+1)))};u.selectRow=function(n,t,i,r){var o,s,e;if(u.allowSelection()&&i>=0&&i<u.rows().length){if(u.rowSelectionType=="single"){if(u.rows()[i].selected())return;for(u.onRowChanging(),e=0;e<u.rows().length;e++)u.rows()[e].selected(!1);u.rows()[i].selected(!0);u.lastSelectedIndex=i}else if(u.rowSelectionType=="multiple")if(t.ctrlKey)u.onRowChanging(),u.rows()[i].selected(!u.rows()[i].selected()),u.rows()[i].selected()&&(u.lastSelectedIndex=i,u.lastShiftIndex=i);else if(t.shiftKey){if(i==u.lastShiftIndex)return;if(u.lastShiftIndex=i,u.onRowChanging(),i==u.lastSelectedIndex||u.lastSelectedIndex==-1){for(e=0;e<u.rows().length;e++)u.rows()[e].selected(!1);u.rows()[i].selected(!0);u.lastSelectedIndex=i}else{for(e=0;e<u.rows().length;e++)u.rows()[e].selected(!1);for(o=-1,s=-1,u.lastSelectedIndex<i?(o=u.lastSelectedIndex,s=i):(o=i,s=u.lastSelectedIndex),e=o;e<=s;e++)u.rows()[e].selected(!0)}}else{if(u.rows().length==1&&u.rows()[i].selected())return;for(u.onRowChanging(),e=0;e<u.rows().length;e++)u.rows()[e].selected(!1);u.rows()[i].selected(!0);u.lastSelectedIndex=i;u.lastShiftIndex=i}r&&f(i);u.onRowChanged()}};u.selectCheck=function(n,t,i){var h,f,e,o,s,r;if(t.stopPropagation(),u.allowSelection())if(u.onRowChanging(),i==-1&&u.rowSelectionType=="multiple"){for(h=!0,f=u.rows(),r=0;r<f.length;r++)if(!f[r].selected()){h=!1;break}if(h)for(r=0;r<f.length;r++)u.rows()[r].selected(!1);else for(r=0;r<f.length;r++)u.rows()[r].selected(!0)}else if(i>=0&&i<u.rows().length){if(e=u.rows()[i].selected(),u.rowSelectionType=="single"){for(r=0;r<u.rows().length;r++)u.rows()[r].selected(!1);e||(u.lastSelectedIndex=i);u.rows()[i].selected(!e)}else if(u.rowSelectionType=="multiple")if(t.shiftKey)if(i==u.lastSelectedIndex||u.lastSelectedIndex==-1)u.rows()[i].selected(!0),u.lastSelectedIndex=i;else{for(r=0;r<u.rows().length;r++)u.rows()[r].selected(!1);for(o=-1,s=-1,u.lastSelectedIndex<i?(o=u.lastSelectedIndex,s=i):(o=i,s=u.lastSelectedIndex),r=o;r<=s;r++)u.rows()[r].selected(!0);u.lastSelectedIndex=i}else u.rows()[i].selected(!e),e||(u.lastSelectedIndex=i);u.onRowChanged()}};u.add=function(n,t){var f,i;if(n instanceof r)typeof t=="number"?u.rows.splice(t,0,n):u.rows.push(n);else if(n instanceof Array){for(f=u.rows(),i=0;i<n.length;i++)n[i]instanceof r&&(typeof t=="number"?f.splice(t++,0,n[i]):f.push(n[i]));u.rows.valueHasMutated()}};u.count=function(){return u.rows().length};u.get=function(n){if(n>=0&&n<u.rows().length)return u.rows()[n]};u.rowChanging=i;u.onRowChanging=function(){var n=u.rowChanging;typeof n=="function"&&n()};u.rowChanged=i;u.onRowChanged=function(){var n=u.rowChanged;typeof n=="function"&&n()};u.textareaRows=function(n,t){u.sizeTextarea(t.currentTarget)};u.sizeTextarea=function(n){while(n.rows>1&&n.scrollHeight<=n.offsetHeight)n.rows--;while(n.scrollHeight>n.offsetHeight)n.rows++}}function v(n){for(var u,i=[],r=0;r<n;r++)u={value:t.observable(""),originalValue:t.observable(""),editing:t.observable(!1),visible:t.observable(!0),editable:t.observable(!0)},i.push(u);return i}function y(){var n=this;n.po_required=!0;n.image="../ds_/datagrid/img/Error.png";n.toString=function(){return""}}window.po||(window.po={});window.po.DataGrid=h;var u=new y})(jQuery,ko);